{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-lg-6">
        <div class="card shadow-lg border-0">
            <div class="card-header bg-gradient border-0">
                <h5 class="card-title mb-0 text-light">
                    <i class="fas fa-pen-fancy me-2 text-warning"></i>
                    Script Generator
                </h5>
                <small class="text-light opacity-75">Powered by AI for YouTube Algorithm Optimization</small>
            </div>
            <div class="card-body">
                <form id="scriptForm">
                    <!-- Mode Selection -->
                    <div class="mb-4">
                        <label class="form-label fw-bold">
                            <i class="fas fa-cog me-2 text-primary"></i>
                            Script Mode
                        </label>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="card border-2" id="mode1Card">
                                    <div class="card-body text-center p-3">
                                        <input class="form-check-input d-none" type="radio" name="script_mode" id="mode1" value="humanize" checked>
                                        <label for="mode1" class="w-100 cursor-pointer">
                                            <i class="fas fa-magic fa-2x text-warning mb-2"></i>
                                            <h6 class="fw-bold">Mode 1: Humanize</h6>
                                            <small class="text-muted">Transform existing script into engaging, human-like narration</small>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-2" id="mode2Card">
                                    <div class="card-body text-center p-3">
                                        <input class="form-check-input d-none" type="radio" name="script_mode" id="mode2" value="generate">
                                        <label for="mode2" class="w-100 cursor-pointer">
                                            <i class="fas fa-pen-nib fa-2x text-success mb-2"></i>
                                            <h6 class="fw-bold">Mode 2: Generate</h6>
                                            <small class="text-muted">Create new script from topic and genre with storytelling</small>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mode 1: Humanize Script Input -->
                    <div class="mb-3" id="humanizeSection">
                        <label for="raw_script" class="form-label">
                            <i class="fas fa-file-text me-1 text-warning"></i>
                            Existing Script to Humanize *
                        </label>
                        <textarea class="form-control" id="raw_script" name="raw_script" rows="8" 
                                  placeholder="Paste your existing script here...&#10;&#10;• The AI will rewrite it in a human, engaging, storytelling style&#10;• Maintains original meaning while making it natural for narration&#10;• Adjusts pacing and structure to fit your selected time duration"></textarea>
                        <div class="form-text">
                            <i class="fas fa-lightbulb me-1"></i>
                            Input any script and we'll transform it into engaging, human-like narration
                        </div>
                        
                        <!-- Duration for Humanize Mode -->
                        <div class="mt-3">
                            <label for="humanize_duration" class="form-label">
                                <i class="fas fa-clock me-1 text-warning"></i>
                                Target Duration for Humanized Script *
                            </label>
                            <select class="form-select" id="humanize_duration" name="humanize_duration">
                                <optgroup label="Short Format">
                                    <option value="30">30 seconds (Quick Hook)</option>
                                    <option value="45" selected>45 seconds (Standard Short)</option>
                                    <option value="60">60 seconds (Detailed Short)</option>
                                </optgroup>
                                <optgroup label="Medium Format">
                                    <option value="120">2 minutes (Brief Story)</option>
                                    <option value="180">3 minutes (Standard Story)</option>
                                </optgroup>
                                <optgroup label="Long Format">
                                    <option value="300">5 minutes (Full Story)</option>
                                    <option value="600">10 minutes (Detailed Analysis)</option>
                                </optgroup>
                            </select>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                Choose how long you want the final humanized script to be
                            </div>
                        </div>
                    </div>

                    <!-- Mode 2: Generate New Script -->
                    <div id="generateSection" style="display: none;">
                        <!-- Topic and Genre -->
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="topic" class="form-label">
                                    <i class="fas fa-lightbulb me-1 text-success"></i>
                                    Topic *
                                </label>
                                <input type="text" class="form-control" id="topic" name="topic" 
                                       placeholder="e.g., UPSC aspirant death case, mysterious disappearance, success story">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="genre" class="form-label">
                                    <i class="fas fa-theater-masks me-1 text-info"></i>
                                    Genre *
                                </label>
                                <select class="form-select" id="genre" name="genre">
                                    <option value="">Select Genre</option>
                                    <option value="mysterious">Mysterious</option>
                                    <option value="motivational">Motivational</option>
                                    <option value="thriller">Thriller</option>
                                    <option value="educational">Educational</option>
                                    <option value="investigative">Investigative</option>
                                    <option value="inspirational">Inspirational</option>
                                    <option value="dramatic">Dramatic</option>
                                    <option value="informative">Informative</option>
                                </select>
                            </div>
                        </div>

                        <!-- Description (Optional) -->
                        <div class="mb-3">
                            <label for="description" class="form-label">
                                <i class="fas fa-align-left me-1 text-secondary"></i>
                                Description <span class="text-muted">(Optional)</span>
                            </label>
                            <textarea class="form-control" id="description" name="description" rows="3" 
                                      placeholder="Provide additional context or specific details you want included in the script...&#10;&#10;Leave blank for creative AI generation based on topic and genre."></textarea>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                Optional: Add specific details to enrich the script, or leave blank for creative generation
                            </div>
                        </div>



                        <!-- Duration for Generate Mode -->
                        <div class="mb-3">
                            <label for="generate_duration" class="form-label">
                                <i class="fas fa-clock me-1 text-success"></i>
                                Target Duration for New Script *
                            </label>
                            <select class="form-select" id="generate_duration" name="generate_duration">
                                <optgroup label="Short Format">
                                    <option value="30">30 seconds (Quick Hook)</option>
                                    <option value="45" selected>45 seconds (Standard Short)</option>
                                    <option value="60">60 seconds (Detailed Short)</option>
                                </optgroup>
                                <optgroup label="Medium Format">
                                    <option value="120">2 minutes (Brief Story)</option>
                                    <option value="180">3 minutes (Standard Story)</option>
                                </optgroup>
                                <optgroup label="Long Format">
                                    <option value="300">5 minutes (Full Story)</option>
                                    <option value="600">10 minutes (Detailed Analysis)</option>
                                </optgroup>
                            </select>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>
                                Choose how long you want the generated script to be
                            </div>
                        </div>
                    </div>

                    <!-- Generate Button (outside of mode sections) -->
                    <button type="submit" class="btn btn-lg btn-primary w-100 shadow-lg" id="generateBtn">
                        <i class="fas fa-magic me-2"></i>
                        <span id="buttonText">Humanize Script</span>
                        <div class="spinner-border spinner-border-sm ms-2" id="buttonSpinner" style="display: none;"></div>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-6">
        <div class="card shadow-lg border-0">
            <div class="card-header bg-gradient border-0 d-flex justify-content-between align-items-center">
                <div>
                    <h5 class="card-title mb-0 text-light">
                        <i class="fas fa-file-alt me-2 text-success"></i>
                        Generated Script
                    </h5>
                    <small class="text-light opacity-75">YouTube-optimized for maximum reach</small>
                </div>
                <button class="btn btn-sm btn-outline-light" id="copyAllBtn" style="display: none;">
                    <i class="fas fa-copy me-1"></i>
                    Copy All
                </button>
            </div>
            <div class="card-body">
                <div id="loadingSpinner" style="display: none;" class="text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Generating...</span>
                    </div>
                    <p class="mt-2">Generating your Hindi script...</p>
                </div>

                <div id="errorMessage" style="display: none;" class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <span id="errorText"></span>
                </div>

                <div id="resultContainer" style="display: none;">
                    <!-- Title -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Title</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="resultTitle" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('resultTitle')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="form-text">
                            <span id="titleLength"></span> characters
                        </div>
                    </div>

                    <!-- VO Script -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Voice Over Script</label>
                        <div class="position-relative">
                            <textarea class="form-control" id="resultScript" rows="8" readonly></textarea>
                            <button class="btn btn-outline-secondary btn-sm position-absolute top-0 end-0 m-2" 
                                    onclick="copyToClipboard('resultScript')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <!-- On-screen Text -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">On-screen Text</label>
                        <div class="input-group">
                            <textarea class="form-control" id="resultOnScreen" rows="3" readonly></textarea>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('resultOnScreen')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Description</label>
                        <div class="position-relative">
                            <textarea class="form-control" id="resultDescription" rows="5" readonly></textarea>
                            <button class="btn btn-outline-secondary btn-sm position-absolute top-0 end-0 m-2" 
                                    onclick="copyToClipboard('resultDescription')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Hashtags -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">
                            <i class="fas fa-hashtag me-1 text-primary"></i>
                            Hashtags
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="resultHashtags" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('resultHashtags')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="form-text">
                            <i class="fas fa-info-circle me-1"></i>
                            Optimized for YouTube algorithm and trending topics
                        </div>
                    </div>

                    <!-- YouTube Tags -->
                    <div class="mb-3" id="youtubeTagsSection" style="display: none;">
                        <label class="form-label fw-bold">
                            <i class="fab fa-youtube me-1 text-danger"></i>
                            YouTube Backend Tags
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="resultYoutubeTags" readonly>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('resultYoutubeTags')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="form-text">
                            <i class="fas fa-rocket me-1"></i>
                            Additional SEO tags for YouTube's backend algorithm
                        </div>
                    </div>

                    <!-- Notes -->
                    <div class="mb-3">
                        <label class="form-label fw-bold">Notes</label>
                        <div class="small text-muted" id="resultNotes"></div>
                    </div>
                </div>

                <div id="emptyState" class="text-center text-muted">
                    <i class="fas fa-video fa-3x mb-3"></i>
                    <p>Fill out the form and click "Generate Script" to create your Hindi YouTube script.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Toast for copy feedback -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="copyToast" class="toast" role="alert">
        <div class="toast-body">
            <i class="fas fa-check text-success me-2"></i>
            Copied to clipboard!
        </div>
    </div>
</div>
{% endblock %}
